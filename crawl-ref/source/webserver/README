Webtiles server
===============
This is the Webtiles server and client.

1. Prerequisites
----------------
To run the server, you need Python (at least version 2.6) and the
Tornado library [1] for Python (between versions 2.3 and 3.x; in
particular, Tornado 4.x is known not to work). Python versions earlier
than 2.7 also require the ordereddict library [2]. Webtiles also
currently only runs on Linux (it may run on other Unices, but that has
not been tested). If you install Tornado by hand, make sure Python can
find it (you may need to set PYTHONPATH before running the server).

You'll need to compile Crawl passing WEBTILES=y to make to get a
suitable binary. For publicly accessible servers, you should also use
USE_DGAMELAUNCH=y; this disables some things like Wizmode, and enables
the milestone and player location display in the lobby.


[1] http://www.tornadoweb.org/
[2] http://pypi.python.org/pypi/ordereddict/


2. Running the server for testing purposes
------------------------------------------
Compile Crawl with WEBTILES=y, make sure you've got Python and
Tornado, then run "python webserver/server.py" from the source
directory. Then open localhost:8080 with a browser, and you should see
the lobby.

When developing, you'll probably want to automatically log in as a
testing user and disable caching of non-game-data files; see the
"autologin" and "no_cache" options in webserver/config.py for this.

3. Running a real server
------------------------
The server can be configured by modifying the file config.py. Most of
the options are commented or should be self-evident. You should
probably set uid and gid to a non-privileged user; you will also want
to enable logging to a file by removing the # before the relevant line
in the logging_config.

You will also need a script that initializes user-specific data, like
copying a default rc file if the user doesn't yet have one --
currently this is not done by the server. You can have the script be
run on every login by setting init_player_program. There is an example
script in util/webtiles-init-player.sh, but you will probably want to
customize it.
